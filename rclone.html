<!DOCTYPE html>
<html lang="es">
<head>
        <meta charset="utf-8" />
        <title>RCLONE</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Blog Informático </a></h1>
                <nav><ul>
    
                        <li><a href="/pages/acerca-de.html">Acerca de</a></li>
                    <li class="active"><a href="/category/category.html">category</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/rclone.html" rel="bookmark"
           title="Permalink to RCLONE">RCLONE</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>mar 29 septiembre 2020</span>

</footer><!-- /.post-info -->      <h2>- Adrián Rodríguez Povea</h2>
<hr>
<p>Buenas! En esta ocasión se va a utilizar la herramienta Rclone, como instalar, como configurar varios almacenamientos de la nube y distintas funcionalidades.</p>
<hr>
<!--more-->

<h2>RClone</h2>
<p>Rclone es una herramienta que permite trabajar con los ficheros que esten almacenados en los distintos servicios de almacenamiento en la nube, puede gestionar y sincronizar los ficheros de los servicios desde la linea de comandos.</p>
<h3>Instalación de Rclone</h3>
<p>Esta herramienta esta disponible en los repositorios oficiales de Debian Buster, ya que se esta usando esa distribución en este ejemplo, para instalar esta herramienta se realiza:</p>
<div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install rclone
</pre></div>


<h3>Configuración de los proveedores cloud</h3>
<p>Se va a configurar dos proveedores cloud, cada proveedor utiliza distintas formas de hacerlo.</p>
<h4>Configuración Dropbox</h4>
<p>Desde el terminal ejecuta:</p>
<div class="highlight"><pre><span></span>rclone config
</pre></div>


<p>Y elije la opción:</p>
<div class="highlight"><pre><span></span><span class="err">n) New remote</span>
</pre></div>


<p>A continuación hay que facilitar los siguientes datos:</p>
<ul>
<li>Un nombre con el que se va a identificar este proveedor. (En este caso dropbox)</li>
<li>De la lista de proveedores elejir el que nos interesa. (Numero 8, que es Dropbox)</li>
<li>Usuario y contraseña si se utiliza una API (En este caso se deja por defecto,es decir, haz un INTRO)</li>
<li>Configuración avanzada. (En este caso se selecciona "No")</li>
</ul>
<p>En el terminal se veria así:</p>
<div class="highlight"><pre><span></span><span class="n">name</span><span class="o">&gt;</span> <span class="n">dropbox</span>
<span class="k">Type</span> <span class="k">of</span> <span class="k">storage</span> <span class="k">to</span> <span class="n">configure</span><span class="p">.</span>
<span class="n">Enter</span> <span class="n">a</span> <span class="n">string</span> <span class="n">value</span><span class="p">.</span> <span class="n">Press</span> <span class="n">Enter</span> <span class="k">for</span> <span class="n">the</span> <span class="k">default</span> <span class="p">(</span><span class="ss">&quot;&quot;</span><span class="p">).</span>
<span class="n">Choose</span> <span class="n">a</span> <span class="nb">number</span> <span class="k">from</span> <span class="n">below</span><span class="p">,</span> <span class="k">or</span> <span class="k">type</span> <span class="k">in</span> <span class="n">your</span> <span class="n">own</span> <span class="n">value</span>
<span class="p">...</span>
 <span class="mi">8</span> <span class="o">/</span> <span class="n">Dropbox</span>
   <span class="err">\</span> <span class="ss">&quot;dropbox&quot;</span>
<span class="p">...</span>
<span class="k">Storage</span><span class="o">&gt;</span> <span class="mi">8</span>
<span class="o">**</span> <span class="n">See</span> <span class="n">help</span> <span class="k">for</span> <span class="n">dropbox</span> <span class="n">backend</span> <span class="k">at</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">rclone</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">dropbox</span><span class="o">/</span> <span class="o">**</span>

<span class="n">Dropbox</span> <span class="n">App</span> <span class="n">Client</span> <span class="n">Id</span>
<span class="n">Leave</span> <span class="n">blank</span> <span class="n">normally</span><span class="p">.</span>
<span class="n">Enter</span> <span class="n">a</span> <span class="n">string</span> <span class="n">value</span><span class="p">.</span> <span class="n">Press</span> <span class="n">Enter</span> <span class="k">for</span> <span class="n">the</span> <span class="k">default</span> <span class="p">(</span><span class="ss">&quot;&quot;</span><span class="p">).</span>
<span class="n">client_id</span><span class="o">&gt;</span> 
<span class="n">Dropbox</span> <span class="n">App</span> <span class="n">Client</span> <span class="n">Secret</span>
<span class="n">Leave</span> <span class="n">blank</span> <span class="n">normally</span><span class="p">.</span>
<span class="n">Enter</span> <span class="n">a</span> <span class="n">string</span> <span class="n">value</span><span class="p">.</span> <span class="n">Press</span> <span class="n">Enter</span> <span class="k">for</span> <span class="n">the</span> <span class="k">default</span> <span class="p">(</span><span class="ss">&quot;&quot;</span><span class="p">).</span>
<span class="n">client_secret</span><span class="o">&gt;</span> 
<span class="n">Edit</span> <span class="n">advanced</span> <span class="n">config</span><span class="o">?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>
<span class="n">y</span><span class="p">)</span> <span class="n">Yes</span>
<span class="n">n</span><span class="p">)</span> <span class="k">No</span>
<span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="o">&gt;</span> <span class="n">n</span>
<span class="n">Remote</span> <span class="n">config</span>
<span class="n">Use</span> <span class="n">auto</span> <span class="n">config</span><span class="o">?</span>
 <span class="o">*</span> <span class="n">Say</span> <span class="n">Y</span> <span class="k">if</span> <span class="k">not</span> <span class="n">sure</span>
 <span class="o">*</span> <span class="n">Say</span> <span class="n">N</span> <span class="k">if</span> <span class="n">you</span> <span class="k">are</span> <span class="n">working</span> <span class="k">on</span> <span class="n">a</span> <span class="n">remote</span> <span class="k">or</span> <span class="n">headless</span> <span class="n">machine</span>
<span class="n">y</span><span class="p">)</span> <span class="n">Yes</span>
<span class="n">n</span><span class="p">)</span> <span class="k">No</span>
<span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="o">&gt;</span> 
</pre></div>


<p>Aqui hay dos opciones:</p>
<ul>
<li>
<p>Si estas trabajando en local con entorno gráfico: Elige <code>y) Yes</code>, esto provocará que se abrá un navegador donde introducir la cuenta de dropbox que queremos asignar y dando permiso a rclone.</p>
</li>
<li>
<p>Si estas trabajando en remoto o sin entorno gráfico: Elige <code>n) No</code>, esto pedirá que ejecutes en otra máquina que tenga entorno el comando:</p>
</li>
</ul>
<div class="highlight"><pre><span></span>rclone authorize <span class="s2">&quot;dropbox&quot;</span>
</pre></div>


<p>Esto probocará que salte un navegador donde se indicara la cuenta y que se autoriza a rclone como en la anterior opción con la diferencia de que una vez se haya autorizado hay que copiar un código que aparece en la terminal y pegarlo en la terminal de la máquina en la que estas trabajando con rclone. En la terminal:</p>
<div class="highlight"><pre><span></span><span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="o">&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="k">For</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">work</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">rclone</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="n">available</span><span class="p">.</span><span class="w"></span>
<span class="k">Execute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="nl">machine</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="n">rclone</span><span class="w"> </span><span class="n">authorize</span><span class="w"> </span><span class="ss">&quot;dropbox&quot;</span><span class="w"></span>
<span class="k">Then</span><span class="w"> </span><span class="n">paste</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="nl">below</span><span class="p">:</span><span class="w"></span>
<span class="k">result</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="ss">&quot;access_token&quot;</span><span class="err">:</span><span class="ss">&quot;f8wc24NV1XwAAAAAAAAAAeXRdjQ5u8pm5V7QBvec0OqzJjPkveFWN6UTGR8PDugG&quot;</span><span class="p">,</span><span class="ss">&quot;token_type&quot;</span><span class="err">:</span><span class="ss">&quot;bearer&quot;</span><span class="p">,</span><span class="ss">&quot;expiry&quot;</span><span class="err">:</span><span class="ss">&quot;0001-01-01T00:00:00Z&quot;</span><span class="err">}</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>
<span class="o">[</span><span class="n">dropbox</span><span class="o">]</span><span class="w"></span>
<span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="ss">&quot;access_token&quot;</span><span class="err">:</span><span class="ss">&quot;f8wc24NV1XwAAAAAAAAAAeXRdjQ5u8pm5V7QBvec0OqzJjPkveFWN6UTGR8PDugG&quot;</span><span class="p">,</span><span class="ss">&quot;token_type&quot;</span><span class="err">:</span><span class="ss">&quot;bearer&quot;</span><span class="p">,</span><span class="ss">&quot;expiry&quot;</span><span class="err">:</span><span class="ss">&quot;0001-01-01T00:00:00Z&quot;</span><span class="err">}</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>
<span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">OK</span><span class="w"></span>
<span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="n">Edit</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">remote</span><span class="w"></span>
<span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">Delete</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">remote</span><span class="w"></span>
<span class="n">y</span><span class="o">/</span><span class="n">e</span><span class="o">/</span><span class="n">d</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="k">Current</span><span class="w"> </span><span class="nl">remotes</span><span class="p">:</span><span class="w"></span>

<span class="n">Name</span><span class="w">                 </span><span class="n">Type</span><span class="w"></span>
<span class="o">====</span><span class="w">                 </span><span class="o">====</span><span class="w"></span>
<span class="n">dropbox</span><span class="w">              </span><span class="n">dropbox</span><span class="w"></span>
</pre></div>


<p>Al finalizar como se puede ver lista los proveedores configurados.</p>
<h3>Configuración Google Drive</h3>
<p>Basicamente es muy parecida a la de dropbox, se comentarán los cambios:</p>
<p>De nuevo escribe el siguiente comando para iniciar la configuración:</p>
<div class="highlight"><pre><span></span>rclone config
</pre></div>


<p>Variaciones respecto a la configuración de Dropbox:</p>
<div class="highlight"><pre><span></span><span class="n">Choose</span> <span class="n">a</span> <span class="n">number</span> <span class="n">from</span> <span class="n">below</span><span class="p">,</span> <span class="ow">or</span> <span class="n">type</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">own</span> <span class="n">value</span>
 <span class="mi">1</span> <span class="o">/</span> <span class="n">Full</span> <span class="n">access</span> <span class="n">all</span> <span class="n">files</span><span class="p">,</span> <span class="n">excluding</span> <span class="n">Application</span> <span class="n">Data</span> <span class="n">Folder</span><span class="o">.</span>
   \ <span class="s2">&quot;drive&quot;</span>
 <span class="mi">2</span> <span class="o">/</span> <span class="n">Read</span><span class="o">-</span><span class="n">only</span> <span class="n">access</span> <span class="n">to</span> <span class="n">file</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="n">file</span> <span class="n">contents</span><span class="o">.</span>
   \ <span class="s2">&quot;drive.readonly&quot;</span>
   <span class="o">/</span> <span class="n">Access</span> <span class="n">to</span> <span class="n">files</span> <span class="n">created</span> <span class="n">by</span> <span class="n">rclone</span> <span class="n">only</span><span class="o">.</span>
 <span class="mi">3</span> <span class="o">|</span> <span class="n">These</span> <span class="n">are</span> <span class="n">visible</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">drive</span> <span class="n">website</span><span class="o">.</span>
   <span class="o">|</span> <span class="n">File</span> <span class="n">authorization</span> <span class="k">is</span> <span class="n">revoked</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">deauthorizes</span> <span class="n">the</span> <span class="n">app</span><span class="o">.</span>
   \ <span class="s2">&quot;drive.file&quot;</span>
   <span class="o">/</span> <span class="n">Allows</span> <span class="n">read</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Application</span> <span class="n">Data</span> <span class="n">folder</span><span class="o">.</span>
 <span class="mi">4</span> <span class="o">|</span> <span class="n">This</span> <span class="k">is</span> <span class="ow">not</span> <span class="n">visible</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">drive</span> <span class="n">website</span><span class="o">.</span>
   \ <span class="s2">&quot;drive.appfolder&quot;</span>
   <span class="o">/</span> <span class="n">Allows</span> <span class="n">read</span><span class="o">-</span><span class="n">only</span> <span class="n">access</span> <span class="n">to</span> <span class="n">file</span> <span class="n">metadata</span> <span class="n">but</span>
 <span class="mi">5</span> <span class="o">|</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">allow</span> <span class="n">any</span> <span class="n">access</span> <span class="n">to</span> <span class="n">read</span> <span class="ow">or</span> <span class="n">download</span> <span class="n">file</span> <span class="n">content</span><span class="o">.</span>
   \ <span class="s2">&quot;drive.metadata.readonly&quot;</span>
<span class="n">scope</span><span class="o">&gt;</span> <span class="mi">1</span>
</pre></div>


<p>Aquí basicamente pide los permisos que se le van a conceder a rclone las opciones son:</p>
<ul>
<li>Acceso completo excluyendo la carpeta de datos de aplicaciones.</li>
<li>Acceso de solo lectura</li>
<li>Acceso sólo a los ficheros creados con Rclone</li>
<li>Acceso completo incluyendo la carpeta de datos de aplicaciones.</li>
<li>Acceso de solo lectura a los archivos metadata.</li>
</ul>
<p>Luego preguntará por ID de root y un fichero de Json para el servicio de credenciales de la cuenta lo cual no hace falta, pulsa "INTRO" en terminal:</p>
<div class="highlight"><pre><span></span><span class="err">ID of the root folder</span>
<span class="err">Leave blank normally.</span>
<span class="err">Fill in to access &quot;Computers&quot; folders. (see docs).</span>
<span class="err">Enter a string value. Press Enter for the default (&quot;&quot;).</span>
<span class="err">root_folder_id&gt; </span>
<span class="err">Service Account Credentials JSON file path </span>
<span class="err">Leave blank normally.</span>
<span class="err">Needed only if you want use SA instead of interactive login.</span>
<span class="err">Enter a string value. Press Enter for the default (&quot;&quot;).</span>
<span class="err">service_account_file&gt; </span>
</pre></div>


<p>Continuando pedirá las mismas opciones ya explicadas en el apartado de Dropbox finalizando sin problemas.</p>
<h3>Opciones de Rclone</h3>
<hr>
<p>Muchas gracias por leer hasta aquí espero que haya servido de ayuda. Un saludo.    </p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>